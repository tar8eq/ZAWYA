<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>متجر طارق T8</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      margin: 0;
      background-color: #f4f4f4;
      direction: rtl;
    }
    header {
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      padding: 12px;
      background-color: #ffffff;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      user-select: none;
    }
    .categories {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding: 12px;
      background-color: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      justify-content: center;
      
    }
    .category {
      flex: 0 0 auto;
      width: 80px;
      height: 100px;
      background-color: #f0f0f0;
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      text-align: center;
      color: #002A6C;
      font-size: 13px;
      font-weight: 500;
      padding: 10px 8px 8px;
      cursor: pointer;
      transition: background-color 0.3s;
      user-select: none;
    }
    .category:hover, .category:focus {
      background-color: #e0e0ff;
      outline: none;
    }
    .category i {
      font-size: 24px;
      margin-top: 6px;
      color: #002A6C;
    }
    .section-title {
      font-size: 20px;
      font-weight: bold;
      padding: 10px 15px 0;
      color: #002060;
      user-select: none;
      text-align: center;
    }
    .products {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 12px;
    }
    .product {
      background-color: white;
      border-radius: 15px;
      padding: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .product-img {
  width: 40%;
  height: auto;
  max-height: 400px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
;
    
    .product-name {
      font-size: 15px;
      font-weight: bold;
      margin: 6px 0 4px;
      text-align: center;
      user-select: none;
    }
    .product-price {
      color: #d21f1f;
      font-size: 16px;
      margin-bottom: 6px;
      font-weight: 700;
      text-align: center;
      user-select: none;
    }
    .product-sizes {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 6px;
    }
    .product-sizes span {
      background-color: #add8e6; /* أزرق فاتح */
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 13px;
      cursor: pointer;
      color: #002A6C;
      border: 1px solid transparent;
      user-select: none;
      transition: all 0.3s ease;
    }
    .product-sizes span.selected {
      background-color: #004080; /* أزرق داكن */
      color: white;
      border: 1px solid #002A6C;
    }
    .add-to-cart-btn {
      background-color: #002A6C;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 13px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s;
      width: 100%;
      max-width: 160px;
      display: none;
      margin-top: 4px;
    }
    .add-to-cart-btn:disabled {
      background-color: #7a8caf;
      cursor: not-allowed;
    }
    .add-to-cart-btn:hover:not(:disabled) {
      background-color: #001f4d;
    }
    .cart-icon {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 22px;
      background: #002A6C;
      color: white;
      padding: 8px 12px;
      border-radius: 50px;
      cursor: pointer;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
    }
    .cart-count {
      position: absolute;
      top: -6px;
      left: -6px;
      background: red;
      color: white;
      font-size: 12px;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      user-select: none;
    }
    /* مودال السلة */
    #cart-modal {
      position: fixed;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 320px;
      max-height: 80vh;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      overflow-y: auto;
      z-index: 10000;
      display: none;
      flex-direction: column;
      padding: 12px 16px;
    }
    #cart-modal.active {
      display: flex;
    }
    #cart-modal h3 {
      margin: 0 0 10px 0;
      text-align: center;
      color: #002A6C;
      user-select: none;
    }
    #cart-items {
      flex-grow: 1;
      overflow-y: auto;
      user-select: none;
    }
    .cart-item {
      border-bottom: 1px solid #eee;
      padding: 8px 0;
      font-size: 14px;
      color: #002060;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .cart-item span {
      display: inline-block;
    }
    .cart-item .remove-btn {
      color: red;
      cursor: pointer;
      font-weight: bold;
      user-select: none;
      font-size: 16px;
      align-self: flex-start;
      margin-top: 4px;
    }
    #cart-total {
      font-weight: bold;
      font-size: 16px;
      margin-top: 10px;
      text-align: center;
      color: #d21f1f;
      user-select: none;
    }
    #btn-confirm-order {
      margin-top: 12px;
      background-color: #002A6C;
      color: white;
      border: none;
      padding: 8px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      font-size: 15px;
      width: 100%;
      user-select: none;
    }
    #btn-confirm-order:hover {
      background-color: #001f4d;
    }
    /* نموذج الطلب */
    #order-form {
      display: none;
      flex-direction: column;
      gap: 10px;
      margin-top: 15px;
    }
    #order-form.active {
      display: flex;
    }
    #order-form label {
      font-size: 14px;
      color: #002060;
      user-select: none;
    }
    #order-form input, #order-form textarea {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      resize: vertical;
      font-family: 'Tajawal', sans-serif;
    }
    #order-form textarea {
      min-height: 60px;
    }
    #order-success {
      display: none;
      margin-top: 15px;
      padding: 12px;
      background-color: #dff0d8;
      color: #3c763d;
      border-radius: 10px;
      text-align: center;
      font-weight: bold;
      font-size: 16px;
      user-select: none;
    }
    /* زر إغلاق المودال */
    #close-cart {
      align-self: flex-end;
      cursor: pointer;
      font-size: 20px;
      color: #002A6C;
      margin-bottom: 8px;
      font-weight: bold;
      border: none;
      background: none;
      user-select: none;
    }
  </style>
</head>
<body>
  <header id="store-name" tabindex="0" aria-pressed="false">متجر طارق T8</header>

  <div class="categories" role="list">
    <div class="category" role="listitem" data-category="رجالي" tabindex="0" aria-label="قسم رجالي">
      <i class="fas fa-mars"></i>
      <span>رجالي</span>
    </div>
    <div class="category" role="listitem" data-category="نسائي" tabindex="0" aria-label="قسم نسائي">
      <i class="fas fa-venus"></i>
      <span>نسائي</span>
    </div>
    <div class="category" role="listitem" data-category="أحذية" tabindex="0" aria-label="قسم أحذية">
      <i class="fas fa-shoe-prints"></i>
      <span>أحذية</span>
    </div>
    <div class="category" role="listitem" data-category="تخفيضات" tabindex="0" aria-label="قسم تخفيضات">
      <i class="fas fa-tags"></i>
      <span>تخفيضات</span>
    </div>
    <div class="category" role="listitem" data-category="أطفال" tabindex="0" aria-label="قسم أطفال">
      <i class="fas fa-child"></i>
      <span>أطفال</span>
    </div>
    <div class="category" role="listitem" data-category="اكسسوارات" tabindex="0" aria-label="قسم اكسسوارات">
      <i class="fas fa-gem"></i>
      <span>اكسسوارات</span>
    </div>
  </div>

  <div class="section-title" id="section-title">عروض مميزة</div>
  <div class="products" id="products-container"></div>

  <!-- أيقونة السلة مع العدد -->
  <div class="cart-icon" id="cart-icon" role="button" tabindex="0" aria-label="عرض السلة">
    <i class="fas fa-shopping-cart"></i>
    <span class="cart-count" id="cart-count">0</span>
  </div>

  <!-- مودال السلة -->
  <div id="cart-modal" role="dialog" aria-modal="true" aria-labelledby="cart-modal-title">
    <button id="close-cart" aria-label="إغلاق نافذة السلة">×</button>
    <h3 id="cart-modal-title">السلة</h3>
    <div id="cart-items"></div>
    <div id="cart-total">المجموع: 0 د.ل</div>
    <button id="btn-confirm-order">تأكيد الطلب</button>

    <!-- نموذج تأكيد الطلب -->
    <form id="order-form" aria-live="polite">
      <label for="name">الاسم:</label>
      <input type="text" id="name" name="name" required autocomplete="name" />

      <label for="phone">رقم الهاتف:</label>
      <input type="tel" id="phone" name="phone" required pattern="[0-9+ ]+" autocomplete="tel" />

      <label for="city">المدينة:</label>
      <input type="text" id="city" name="city" required />

      <label for="address">العنوان:</label>
      <input type="text" id="address" name="address" required />

      <label for="notes">ملاحظات:</label>
      <textarea id="notes" name="notes"></textarea>

      <button type="submit">إرسال الطلب</button>
    </form>

    <div id="order-success">تم استلام طلبك بنجاح!</div>
  </div>

  <script>
    // بيانات المنتجات
    const productsData = [
      // قسم رجالي
      { category: "رجالي", name: "قميص رجالي", price: 150, sizes: ["S", "M", "L", "XL"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT5SoDrDfj1sjEl67gkEHKPOl8Jz4GafWoIWQ&s" },
      { category: "رجالي", name: "بنطلون جينز", price: 200, sizes: ["S", "M", "L", "XL"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRR7_g_c6mjXoulMzdIO24MYkx9VoLDJ11lIQ&s" },
      { category: "رجالي", name: "جاكيت شتوي", price: 300, sizes: ["M", "L", "XL"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRWgJew8TDZvUyaM2C7bSHgwXs_DScDgYn8w&s" },
      { category: "رجالي", name: "حذاء رسمي", price: 350, sizes: ["40", "41", "42", "43"], img: "https://cdn.dsmcdn.com/mnresize/600/-/ty1208/product/media/images/prod/SPM/PIM/20240312/23/f56d9982-123b-37bf-8be3-cf1e7d945033/1_org_zoom.jpg" },

      // قسم نسائي
      { category: "نسائي", name: "فستان أنيق", price: 270, sizes: ["S", "M", "L", "XL"], img: "https://cdn.salla.sa/vRdDE/a74fb5cd-ef97-4e52-ae93-5e971c753ef2-802.34375x1000-OlRT0XU3WaePi0QXNuGBgstqHoeviYiY2XkiRphn.jpg" },
      { category: "نسائي", name: "بلوزة صيفية", price: 140, sizes: ["S", "M", "L", "XL"], img: "https://img.joomcdn.net/ef76f8bf7e498bbbc402fc2e47e34e580de8482e_original.jpeg" },
      { category: "نسائي", name: "حذاء كعب عالي", price: 400, sizes: ["36", "37", "38", "39", "40"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdbEXKOCpYwHRvoccTHLSxGElqmftIhJ7TYg&s" },
      { category: "نسائي", name: "شنطة يد", price: 230, sizes: ["حر"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZbis0gtpNwZTbHUx1m1t9NJ-Owpv9VE7xPA&s" },

      // قسم أحذية
      { category: "أحذية", name: "حذاء رياضي", price: 199, sizes: ["40", "41", "42", "43", "44", "45"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQGfccOJWw20b3l_4ppemEGjUoZ71OmCtOFBQ&s" },
      { category: "أحذية", name: "حذاء كاجوال", price: 220, sizes: ["40", "41", "42", "43", "44", "45"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQjjutVQqCkerf_-kh7XnR2-kjK-qa1TjRAw&s" },
      { category: "أحذية", name: "حذاء رسمي", price: 350, sizes: ["40", "41", "42", "43", "44", "45"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwwNMozjY_B3MV2aO_W-ywctXvjIj9qnX1-Q&s" },
      { category: "أحذية", name: "صندل صيفي", price: 120, sizes: ["40", "41", "42", "43", "44", "45"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQH3C2IH50Y-BWbIpBnNyrDD8ygAW2i9X8WveUlG4MDnhvuJYXRQlgWDmHq0QnmTuTj1kM&usqp=CAU" },

      // قسم تخفيضات
      { category: "تخفيضات", name: "جاكيت شتوي", price: 99, sizes: ["M", "L", "XL"], img: "https://fueler.store/cdn/shop/files/mercedes-amg-petronas-team-insulated-jacket-fuelertm-701223429001220-fueler-store-56711.jpg?v=1746017516&width=1080" },
      { category: "تخفيضات", name: "تيشيرت قطن", price: 50, sizes: ["S", "M", "L"], img: "https://cdn.salla.sa/DGdYNG/6280b126-2e3d-4147-b79c-6d9c6bb584a3-1000x1000-7zUhlU6hNEi8aqtO99pYr7noFbBuy3UB3du2ywXA.jpg" },
      { category: "تخفيضات", name: "حذاء رياضي", price: 100, sizes: ["40", "41", "42"], img: "https://d1q03ajwgi7cv2.cloudfront.net/media/catalog/product/cache/044159eab4ae3e4105dde6ae7281cf27/e/r/eriindi-2026510740001220_main.jpg" },
      { category: "تخفيضات", name: "بنطلون جينز", price: 150, sizes: ["S", "M", "L"], img: "https://cdn.salla.sa/BExZy/5bc93ff9-9aaf-4dbe-8459-d6e5e1bae4ba-1000x1000-9SHJvIciZbOFDZGZ7cU78GZuuwEOtf1kWHiphL0T.jpg" },

      // قسم أطفال
      { category: "أطفال", name: "تيشيرت أطفال", price: 60, sizes: ["S", "M", "L"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTwpmFvKjMjyOfNMC7l5n6NSsqs45moJbKlMg&s" },
      { category: "أطفال", name: "بنطلون أطفال", price: 80, sizes: ["S", "M", "L"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTsekJofKEsbue2zgi4WhdNQ3SiKCJGcOUFyw&s" },
      { category: "أطفال", name: "حذاء أطفال", price: 90, sizes: ["30", "31", "32"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRl82LGWWiXXkdlKgdLcQsQlPxTMujnHHICOQ&s" },
      { category: "أطفال", name: "قبعة أطفال", price: 40, sizes: ["حر"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRaRUdzngF9_Jfe-odtrQujj2UQXzfaTaAtx4L_rmZ01z3E7rhuxCvF4Lg1IKjwCoPKafM&usqp=CAU" },

      // قسم اكسسوارات
      { category: "اكسسوارات", name: "سوار جلد", price: 45, sizes: ["حر"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSj0e9bs4HUqhf8z-RXTAIZdMS0QGVo1T26lg&s" },
      { category: "اكسسوارات", name: "نظارة شمس", price: 120, sizes: ["حر"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXrYECRf0yVIG6o_sYg9eVYYvUmCQXepoCVA&s" },
      { category: "اكسسوارات", name: "ساعة يد", price: 350, sizes: ["حر"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBRmzwlhO9ZwA73-nhdSI9bAd3nPCSLVJeHA&s" },
      { category: "اكسسوارات", name: "قلادة", price: 75, sizes: ["حر"], img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPVfOVwSqcBy9Odb2S5vj6y-CHMD9Iv2NTiPqLEfqur5cwOiQOYuHAEUMdLsCCX8CwIjM&usqp=CAU" }
    ];

    // المتغيرات
    const categoriesEls = document.querySelectorAll('.category');
    const productsContainer = document.getElementById('products-container');
    const sectionTitle = document.getElementById('section-title');
    const cartIcon = document.getElementById('cart-icon');
    const cartCountEl = document.getElementById('cart-count');
    const cartModal = document.getElementById('cart-modal');
    const cartItemsEl = document.getElementById('cart-items');
    const cartTotalEl = document.getElementById('cart-total');
    const btnConfirmOrder = document.getElementById('btn-confirm-order');
    const orderForm = document.getElementById('order-form');
    const orderSuccess = document.getElementById('order-success');
    const closeCartBtn = document.getElementById('close-cart');

    let selectedCategory = "رجالي";
    let cart = [];

    // عرض المنتجات حسب القسم
    function displayProducts(category) {
      sectionTitle.textContent = category;
      productsContainer.innerHTML = '';
      const filtered = productsData.filter(p => p.category === category).slice(0, 4); // أربعة أصناف لكل قسم
      filtered.forEach((product, index) => {
        const productDiv = document.createElement('div');
        productDiv.classList.add('product');

        productDiv.innerHTML = `
         <img src="${product.img}" alt="${product.name}" loading="lazy" class="product-img" />
          <div class="product-name">${product.name}</div>
          <div class="product-price">${product.price} د.ل</div>
          <div class="product-sizes" role="list" aria-label="مقاسات المنتج">
            ${product.sizes.map(size => `<span role="listitem" tabindex="0" data-product-index="${index}" data-size="${size}">${size}</span>`).join('')}
          </div>
          <button class="add-to-cart-btn" disabled aria-disabled="true" aria-label="إضافة المنتج إلى السلة">🛒 إضافة للسلة</button>
        `;

        productsContainer.appendChild(productDiv);
      });
      setupSizeSelection();
    }

    // تفعيل اختيار المقاسات
    function setupSizeSelection() {
      const productEls = productsContainer.querySelectorAll('.product');
      productEls.forEach((prodEl, prodIdx) => {
        const sizeSpans = prodEl.querySelectorAll('.product-sizes span');
        const addBtn = prodEl.querySelector('.add-to-cart-btn');
        let selectedSize = null;

        sizeSpans.forEach(sizeEl => {
          sizeEl.addEventListener('click', () => {
            // إلغاء اختيار المقاسات الأخرى
            sizeSpans.forEach(s => {
              s.classList.remove('selected');
              s.setAttribute('aria-pressed', 'false');
            });
            sizeEl.classList.add('selected');
            sizeEl.setAttribute('aria-pressed', 'true');
            selectedSize = sizeEl.dataset.size;
            addBtn.disabled = false;
            addBtn.setAttribute('aria-disabled', 'false');
          });
          sizeEl.addEventListener('keydown', (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              sizeEl.click();
            }
          });
        });

        addBtn.style.display = 'block';
        addBtn.onclick = () => {
          if (!selectedSize) return;
          const product = productsData.filter(p => p.category === selectedCategory).slice(0,4)[prodIdx];
          addToCart(product, selectedSize);
          // إعادة تعيين حالة الزر والمقاسات
          addBtn.disabled = true;
          addBtn.setAttribute('aria-disabled', 'true');
          sizeSpans.forEach(s => {
            s.classList.remove('selected');
            s.setAttribute('aria-pressed', 'false');
          });
          selectedSize = null;
        };
      });
    }

    // إضافة منتج للسلة
    function addToCart(product, size) {
      // تحقق إذا المنتج بنفس المقاس موجود مسبقًا لزيادة الكمية
      const existingIndex = cart.findIndex(item => item.name === product.name && item.size === size);
      if (existingIndex !== -1) {
        cart[existingIndex].quantity++;
      } else {
        cart.push({ name: product.name, price: product.price, size, quantity: 1 });
      }
      updateCartCount();
    }

    // تحديث عدد المنتجات في شعار السلة
    function updateCartCount() {
      const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
      cartCountEl.textContent = totalItems;
    }

    // عرض محتوى السلة في المودال
    function displayCartItems() {
      cartItemsEl.innerHTML = '';
      if (cart.length === 0) {
        cartItemsEl.textContent = 'السلة فارغة';
        cartTotalEl.textContent = 'المجموع: 0 د.ل';
        btnConfirmOrder.style.display = 'none';
        orderForm.classList.remove('active');
        orderSuccess.style.display = 'none';
        return;
      }
      btnConfirmOrder.style.display = 'block';
      orderForm.classList.remove('active');
      orderSuccess.style.display = 'none';

      cart.forEach((item, idx) => {
        const div = document.createElement('div');
        div.classList.add('cart-item');
        div.innerHTML = `
          <span><strong>${item.name}</strong> - المقاس: ${item.size}</span>
          <span>الكمية: ${item.quantity}</span>
          <span>السعر الفردي: ${item.price} د.ل</span>
          <span>المجموع: ${item.price * item.quantity} د.ل</span>
          <span class="remove-btn" role="button" tabindex="0" aria-label="إزالة ${item.name} من السلة" data-index="${idx}">× إزالة</span>
        `;
        cartItemsEl.appendChild(div);
      });

      // اجمالي السعر
      const totalPrice = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
      cartTotalEl.textContent = `المجموع: ${totalPrice} د.ل`;

      // أحداث إزالة الأصناف
      cartItemsEl.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = parseInt(btn.dataset.index, 10);
          cart.splice(idx, 1);
          updateCartCount();
          displayCartItems();
        });
        btn.addEventListener('keydown', e => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            btn.click();
          }
        });
      });
    }

    // فتح وإغلاق السلة
    cartIcon.addEventListener('click', () => {
      cartModal.classList.toggle('active');
      displayCartItems();
      btnConfirmOrder.style.display = cart.length ? 'block' : 'none';
      orderForm.classList.remove('active');
      orderSuccess.style.display = 'none';
    });
    cartIcon.addEventListener('keydown', e => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        cartIcon.click();
      }
    });

    closeCartBtn.addEventListener('click', () => {
      cartModal.classList.remove('active');
      orderForm.classList.remove('active');
      orderSuccess.style.display = 'none';
    });

    // اختيار القسم من الشريط العلوي
    categoriesEls.forEach(catEl => {
      catEl.addEventListener('click', () => {
        selectedCategory = catEl.dataset.category;
        displayProducts(selectedCategory);
      });
      catEl.addEventListener('keydown', e => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          catEl.click();
        }
      });
    });

    // تأكيد الطلب - إظهار نموذج إدخال البيانات
   btnConfirmOrder.addEventListener('click', () => {
    orderForm.style.display = 'flex';
    btnConfirmOrder.style.display = 'none';
    orderSuccess.style.display = 'none';
  });

  // إرسال الطلب
  orderForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    // جمع البيانات من النموذج
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const city = document.getElementById('city').value.trim();
    const address = document.getElementById('address').value.trim();
    const notes = document.getElementById('notes').value.trim();

    if(cart.length === 0) {
      alert('السلة فارغة، الرجاء إضافة منتجات.');
      return;
    }

    // بناء نص المشتريات
    const itemsText = cart.map(item => `• ${item.name} - المقاس: ${item.size} - الكمية: ${item.quantity} - السعر: ${item.price} د.ل`).join('\n');

    // حساب المجموع الكلي
    const totalPrice = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);

    // رسالة الطلب
    const message = `
📦 طلب جديد من متجر طارق
👤 الاسم: ${name}
📞 الهاتف: ${phone}
🏙️ المدينة: ${city}
📍 العنوان: ${address}
📝 ملاحظات: ${notes}

🛒 المشتريات:
${itemsText}

📊 المجموع الكلي: ${totalPrice} د.ل
`;

    const botToken = "7904675794:AAErKUwOydYemruU0cp3pFsKRG2_7vj72UU";
    const chatId = "355888174";

    try {
      const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: message })
      });

      if(response.ok) {
        alert('✅ تم إرسال الطلب بنجاح!');
        cart = [];
        updateCartCount();
        displayCartItems();
        orderForm.reset();
        orderForm.style.display = 'none';
        btnConfirmOrder.style.display = 'block';
        orderSuccess.style.display = 'block';
      } else {
        alert('❌ فشل إرسال الطلب. حاول مرة أخرى.');
      }
    } catch (error) {
      alert('❌ حدث خطأ أثناء إرسال الطلب.');
      console.error(error);
    }
  });

  // **الكود الخاص بعرض المنتجات واختيار المقاسات وإضافة للسلة** (يجب أن يبقى كما لديك سابقًا)
  // تأكد أن تستدعي addToCart(product, size) بشكل صحيح عند الضغط على زر الإضافة للسلة.

</script>

<form id="orderForm" style="max-width:400px; margin: 20px auto; background:#fff; padding:20px; border-radius:12px; display: none;">
  <input id="customer-name" type="text" placeholder="الاسم" required />
  <input id="customer-phone" type="tel" placeholder="رقم الهاتف" required />
  <input id="customer-city" type="text" placeholder="المدينة" required />
  <input id="customer-address" type="text" placeholder="العنوان" required />
  <textarea id="customer-notes" placeholder="ملاحظات"></textarea>
  <button type="submit">إرسال الطلب</button>
</form>
</script>
</body>
</html>
